# ESP32 AI Radio Project

A sophisticated, AI-driven radio station project running on ESP32 hardware. This system generates dynamic content (News, Weather, Gossip) presented by distinct "DJ Personalities" (like Mr. New Vegas or Julie), mixed with a curated music library.

## ðŸ“Œ State of the Repository (January 2026)

This project has recently undergone significant restructuring to focus on high-fidelity DJ persona generation.

### Recent Updates
*   **DJ Personalities**: 
    *   **Three Dog** has been archived/removed.
    *   **Travis Miles** has been split into two distinct modes: **Nervous** (Pre-Quest) and **Confident** (Post-Quest).
    *   **Julie** (Fallout 76) has been added with a full personality profile.
    *   **Mr. New Vegas** has received a "deep dive" update for canonical accuracy.
*   **Audio Management**: Voice source files (MP3s) are now stored locally in personality folders but strictly ignored by Git to keep the repo lightweight.
*   **Tools**: Integration with local LLMs (Ollama) is configured in `tools/ollama_setup/`.

---

## ðŸ“‚ Project Structure & Organization

The file system is organized to support a modular content generation pipeline, separating distinct stages of the broadcast loop (Persona -> Script -> Audio -> Playback).

### 1. **Content Pipeline**
This architecture separates the *creation* of content (scripts) from the *production* of content (audio) to allow for easier debugging and regeneration.

*   **`dj personality/`**
    *   Contains the "Source of Truth" for the AI hosts.
    *   **Reasoning**: Each folder holds the specific prompts, style guides (`character_profile.md`), and JSON configurations (`character_card.json`) that define that character's voice.
    *   *Current Personalities*:
        *   `Mr. New Vegas/` - Sophisticated, smooth AI host.
        *   `Julie/` - Earnest, community-focused host.
        *   `Travis Miles (Nervous)/` - Anxious, stammering Pre-Confidence Man.
        *   `Travis Miles (Confident)/` - Suave, "Cool Cat" Post-Confidence Man.
        *   `Mr. Med City/` - *Experimental/Custom Persona*.

*   **`script generation/`**
    *   Stores the raw text output generated by the LLM before it becomes audio.
    *   *Subfolders*: `Weather`, `Time`, `Fireside Chats`, `Gossip`, `News`, `Ads`, `Music Intros`.

*   **`audio generation/`**
    *   The final `.mp3` or `.wav` output files generated from the scripts (TTS) ready for the ESP32.
    *   *Subfolders*: Matches `script generation` 1:1.

*   **`music/`**
    *   The core music library (Fallout-style tracks).
    *   *Note*: Audio source files are local-only and ignored by version control.

### 2. **System Health & Maintenance**

*   **`tools/`**
    *   Utilities for managing the project.
    *   *Subfolders*:
        *   `main tools/`: Stable scripts for content generation and SD card sync.
        *   `ollama_setup/`: Scripts and configs for local LLM inference (e.g., `test_connection.py`).
        *   `temp tools/`: Experimental scripts or one-off fixes.

*   **`Debug Logs/`**
    *   Centralized logging repository used to troubleshooting the multi-stage pipeline.

### 3. **Firmware (PlatformIO)**
*   **`src/`**: Contains the C++ firmware code (`main.cpp`) for the ESP32.
*   **`lib/`**: Shared C++ libraries.
*   **`platformio.ini`**: Build configuration and dependencies.

---

## ðŸ›  Hardware Setup

*   **Board**: ESP32 Dev Module (ESP-WROOM-32)
*   **Audio**: MAX98357A I2S 3W Class D Amplifier
*   **Speaker**: DWEII 4 Ohm 3 Watt Speaker
*   **Storage**: Micro SD Card Monitor
*   **Controls**: 10k Potentiometer (Volume)

### Pinout Configuration

| Component | ESP32 Pin | Description |
| :--- | :--- | :--- |
| **MAX98357A** | | **I2S Audio Amp** |
| BCLK | GPIO 26 | Bit Clock |
| LRC | GPIO 25 | Left/Right Clock |
| DIN | GPIO 22 | Data In |
| **SD Card** | | **VSPI Bus** |
| CS | GPIO 5 | Chip Select |
| MOSI | GPIO 23 | Data In |
| MISO | GPIO 19 | Data Out |
| SCK | GPIO 18 | Clock |
| **Controls** | | |
| Potentiometer | GPIO 39 | Volume Control |
| LED | GPIO 2 | Status Indicator |
