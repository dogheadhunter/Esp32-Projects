# ESP32 AI Radio Project

A sophisticated, AI-driven radio station project running on ESP32 hardware. This system generates dynamic content (News, Weather, Gossip) presented by distinct "DJ Personalities" (like Mr. New Vegas or Three Dog), mixed with a curated music library.

## ðŸ“‚ Project Structure & Organization

The file system is organized to support a modular content generation pipeline, separating distinct stages of the broadcast loop (Persona -> Script -> Audio -> Playback).

### 1. **Content Pipeline**
This architecture separates the *creation* of content (scripts) from the *production* of content (audio) to allow for easier debugging and regeneration.

*   **`dj personality/`**
    *   Contains the "Source of Truth" for the AI hosts.
    *   **Reasoning**: Each folder (`Mr. New Vegas`, `Three Dog`, `Julie`, etc.) holds the specific prompts, style guides, and catchphrases that define that character's voice.
    *   *Subfolders*: `Mr. New Vegas`, `Julie`, `Three dog`, `Miles Travis`, `Mr. Med City`.

*   **`script generation/`**
    *   Stores the raw text output generated by the LLM before it becomes audio.
    *   **Reasoning**: Separating scripts by category allows us to inspect the AI's "writing" before spending resources on TTS generation. It also lets us debug hallucinated metadata or bad formatting.
    *   *Subfolders*: `Weather`, `Time`, `Fireside Chats`, `Gossip`, `News`, `Ads`, `Music Intros`.

*   **`audio generation/`**
    *   The final `.mp3` or `.wav` output files generated from the scripts (TTS) ready for the ESP32.
    *   **Reasoning**: Mimics the `script generation` structure 1:1. This allows the playback engine to easily fetch "Weather Audio" or "News Audio" without complex database lookups.
    *   *Subfolders*: `Weather`, `Time`, `Fireside Chats`, `Gossip`, `News`, `Ads`, `Music Intros`.

*   **`music/`**
    *   The core music library (Fallout-style tracks).
    *   **Reasoning**: Kept separate from generated speech to allow for independent shuffling and volume normalization.

### 2. **System Health & Maintenance**

*   **`Debug Logs/`**
    *   Centralized logging repository.
    *   **Reasoning**: Troubleshooting a multi-stage pipeline (AI -> TTS -> Embedded) is complex. We separate logs by the subsystem that produced them to instantly narrow down issues.
    *   *Subfolders*:
        *   `device/`: Serial outputs and crash dumps from the physical ESP32.
        *   `pipeline/`: Errors during script generation or TTS rendering (Python side).
        *   `simulation/`: Logs from desktop emulation of the radio logic.
        *   `music/`: Metadata errors or missing track checks.

*   **`tools/`**
    *   Utilities for managing the project.
    *   **Reasoning**: Keeps the root directory clean and separates stable production tools from experiments.
    *   *Subfolders*:
        *   `main tools/`: Stable scripts for content generation and SD card sync.
        *   `temp tools/`: Experimental scripts or one-off fixes.

### 3. **Firmware (PlatformIO)**
*   **`src/`**: Contains the C++ firmware code (`main.cpp`) for the ESP32.
*   **`lib/`**: Shared C++ libraries.
*   **`platformio.ini`**: Build configuration and dependencies.

---

## ðŸ›  Hardware Setup

*   **Board**: ESP32 Dev Module (ESP-WROOM-32)
*   **Audio**: MAX98357A I2S 3W Class D Amplifier
*   **Speaker**: DWEII 4 Ohm 3 Watt Speaker
*   **Storage**: Micro SD Card Monitor
*   **Controls**: 10k Potentiometer (Volume)

### Pinout Configuration

| Component | ESP32 Pin | Description |
| :--- | :--- | :--- |
| **MAX98357A** | | **I2S Audio Amp** |
| BCLK | GPIO 26 | Bit Clock |
| LRC | GPIO 25 | Left/Right Clock |
| DIN | GPIO 22 | Data In |
| **SD Card** | | **VSPI Bus** |
| CS | GPIO 5 | Chip Select |
| MOSI | GPIO 23 | Data In |
| MISO | GPIO 19 | Data Out |
| SCK | GPIO 18 | Clock |
| **Controls** | | |
| Potentiometer | GPIO 39 | Volume Control |
| LED | GPIO 2 | Status Indicator |
